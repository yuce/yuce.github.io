<!DOCTYPE html>
<html lang="en">
	<head>
		<link href="http://gmpg.org/xfn/11" rel="profile">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta http-equiv="content-type" content="text/html; charset=utf-8">

		<!-- Enable responsiveness on mobile devices-->
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

		<title>yüce's blog</title>
        <link rel="shortcut icon" href="/images/favicon.ico" />
		<!-- CSS -->
		<link href="//fonts.googleapis.com/" rel="dns-prefetch">
		<link href="//fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic|Abril+Fatface|PT+Sans:400,400italic,700&amp;subset=latin,latin-ext" rel="stylesheet">

		<link rel="stylesheet" href="/theme/css/poole.css" />
		<link rel="stylesheet" href="/theme/css/hyde.css" />
		<link rel="stylesheet" href="/theme/css/syntax.css" />
        <link rel="stylesheet" href="/theme/css/style.css" />
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">

		<!-- RSS -->
		<link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">
	<script type="text/javascript">
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
 			(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
 			m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
 			})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
			ga('create', 'UA-35253376-2', 'auto');
			ga('send', 'pageview');
	</script>
	</head>

	<body class="theme-base-0d">
<div class="sidebar">
    <div class="container sidebar-sticky">
        <p class="tag-cloud">
            &nbsp;
            99 bottles&nbsp;
            accumulator generator&nbsp;
            AI&nbsp;
            amarok&nbsp;
            catnats&nbsp;
            CEC2003&nbsp;
            combination&nbsp;
            computational intelligence&nbsp;
            concert&nbsp;
            congress&nbsp;
            constraint programming&nbsp;
            ctypes&nbsp;
            currying&nbsp;
            DCOP&nbsp;
            Digital Ocean&nbsp;
            erlang&nbsp;
            failure&nbsp;
            file upload&nbsp;
            firefox&nbsp;
            flash&nbsp;
            FOSS&nbsp;
            freetype2&nbsp;
            genetic algorithms&nbsp;
            ghostscript&nbsp;
            go&nbsp;
            heavy metal&nbsp;
            hoary hedgehog&nbsp;
            http&nbsp;
            IEEE&nbsp;
            infix&nbsp;
            Istanbul&nbsp;
            KDE&nbsp;
            link checker&nbsp;
            linux&nbsp;
            mac&nbsp;
            Manowar&nbsp;
            marvin&nbsp;
            marvin3&nbsp;
            me&nbsp;
            movie&nbsp;
            NATS&nbsp;
            nearest neighbor&nbsp;
            open solaris&nbsp;
            osx&nbsp;
            osx 10.6&nbsp;
            parody&nbsp;
            Paul Graham&nbsp;
            pdf&nbsp;
            postfix&nbsp;
            prisoner's dilemma&nbsp;
            prolog&nbsp;
            prometheus&nbsp;
            protocol&nbsp;
            pyswip&nbsp;
            python&nbsp;
            reportlab&nbsp;
            send more money&nbsp;
            sendmory&nbsp;
            strings&nbsp;
            systemd&nbsp;
            telnet&nbsp;
            tip&nbsp;
            tips&nbsp;
            tricks&nbsp;
            Tutorial&nbsp;
            ubuntu&nbsp;
        </p>

    </div>
	<div class="container sidebar-sticky">
		<div class="sidebar-about">

			<h1>
				<a href="/">
					<img class="profile-picture" src="http://yuce.me/images/me.png">
					<span class="sitename">yüce's blog</span>
				</a>
			</h1>
			<p class="lead"></p>
			<p class="lead"> </p>
			<p></p>
		</div>
		<nav class="sidebar-nav">
					<a class="sidebar-nav-item2" href="https://twitter.com/tklx" title="twitter">twitter</a>
					<a class="sidebar-nav-item2" href="https://github.com/yuce" title="github">github</a>
		</nav>
	</div>
</div>		<div class="content container">
<div class="post">
	<h1 class="post-title">NATS Protocol and Catnats</h1>
	<span class="post-date">2016-04-17</span>
    <div class="article-tag-box">
            <div class="tag">NATS</div>
            <div class="tag">protocol</div>
            <div class="tag">catnats</div>
            <div class="tag">telnet</div>
    </div>

	<p><a href="http://nats.io">NATS messaging system</a> has a text based <a href="http://nats.io/documentation/internals/nats-protocol/">protocol</a> which is pretty fun and easy to play with.
Since <em>gnatsd</em> (NATS server) talks in TCP using this text protocol, you can just <code>telnet</code> (or <code>nc</code>) into it to deal with the protocol directly.
You can have a look at a sample session <a href="http://nats.io/documentation/internals/nats-protocol-demo/">here</a>.</p>
<p><strong>Btw, using telnet confuses new starters, because telnet is also a different protocol</strong></p>
<p>Although telnet (or nc) is pretty prevalent and easy to work with, you start to experience its shortcomings very quickly.
One of the first things you will realize is, you can't leave your telnet session open wihout interacting with it every few minutes.
gnatsd sends <code>PING</code> messages to the clients periodically to check whether they are active.
If a client fails to respond with <code>PONG</code> for a few <code>PING</code>s in a row, gnatsd cuts the connection to that client.
You can read about this important optimization <a href="http://nats.io/documentation/server/gnatsd-prune/">here</a>.
So, in order to keep your telnet session to gnatsd open, you have to type <code>PONG</code> once every 2-3 minutes.</p>
<p>Keeping your telnet session alive is cumbersome but managable, as long as it is short.
What telnet can't do is, connecting to a gnatsd server which requires <a href="https://en.wikipedia.org/wiki/Transport_Layer_Security">TLS</a>.</p>
<p>gnatsd uses TLS to secure the traffic between itself and its clients.</p>
<p><strong>The importance of text based tools on UNIX</strong></p>
</div>
            <footer>
                <p class="footer">&copy; 2003-2016 Yüce Tekol</p>
            </footer>
		</div>
	</body>
</html>